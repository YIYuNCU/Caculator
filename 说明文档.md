## 核心文件

### ***以下内容为本计算器核心代码，移植到其他应用时只需要移植下述代码***

### ***以下文件的函数均有说明，一般在.h文件中书写，鼠标光标静置在对应函数名上也可看到***

### caculate.cpp/caculate.h

有关计算的所有代码

### invert.cpp/invert.h

有关变量类型转换的代码



## caculate文件

### for(char : postfix)

C++11引入的，用于遍历数组，向量等，或可迭代对象中元素的语法

等价于 `for (int i = 0; i < postfix.length(); ++i) { char c = postfix[i];`

### %.*g

#### .*

*表示该变量会在后面给出

#### %g

 使用该格式符，系统会自动选择f格式或者e格式中长度较短的格式

#### e格式

 指数格式

### 中缀表达式和后缀表达式

#### 什么是中缀表达式和后缀表达式

中缀表达式为日常生活中常见的算数表达式书写方法，例如 `（1+1）* 2`，其利于人类理解，但不利于机器理解

后缀表达式是一种将运算符号放在对应的一组操作数后面的书写方式，例如`1 1 + 2 *`，其利于计算机使用栈进行计算

#### 如何将中缀表达式转换成后缀表达式

如果遇到左括号则直接将其压入符号栈

如果遇到右括号则弹出符号栈中的运算符并将其加入后缀表达式，直到遇到左括号为止

如果遇到运算符：1.栈顶符号优先级较低：将运算符压入栈

                               2.栈顶符号优先级较高(或相等)：将栈顶符号弹出并加入后缀表达式

如果遇到操作数：直接加入后缀表达式

#### 各个符号优先级

1.(：0

2.+或-：1

3.*或/：2

4.数字：3

5.)：4

## 不足（以下内容需要前端或新建文件，新写函数（推荐新建文件）进行处理）

### caculate:

**0.不能判断计算式是否可计算，出现不可计算的计算式会直接报错卡死（调用caculate前需要提前判断计算式是否可行）**

1.不能判断负号（解决办法：在调用caculate前将负数改为(0-绝对值)格式，例如-5改为(0-5)）

2.不能识别中文括号（解决办法：在消息预处理函数中直接拦截需要的按键消息，并给定合法的值）



4.使用double类型可能存在精度问题，导致算出来的数不准

## 预估程序实现效果

![Caculator](D:\代码\计算器\Caculator\Caculator.png)

（忽略x²或者将x²视作（x*x））
